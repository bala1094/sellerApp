<mat-sidenav-container class="container">
  <mat-sidenav mode="side" opened>
    <app-menu [showPushNav]="showPushNav" [currenPage]="'productSourcing'"></app-menu>
  </mat-sidenav>
  <mat-sidenav-content [@onMainContentChange]="showPushNav ? 'open': 'close'">
    <div class="main_content">
      <div class="route-text">
        <img src="./../../../assets/images/home.svg" alt="">
				<span>&nbsp;/&nbsp;Product Sourcing</span>
      </div>
      <div class="body-data">
        <div class="search-containter" *ngIf="!dataAvailable">
          <h1>Product Sourcing</h1>
          <p>Find the best manufacturers to source your next Amazon product launch</p>
          <div class="powered-by-container">
            <p>Powered by</p>
            <img src="./../../../assets/images/alibaba logo full.svg" alt="">
          </div>
          <div class="search-box">
            <input 
            [ngModel]="searchText" 
            class="search-box-input"
            type="text"
            placeholder="Enter product keyword">
            <p (click)="fetchdata()" class="search-text-btn">Search</p>
          </div>
          <div class="notes-containter">
            <div class="notes">
              <img src="../../../assets/images/bullets.svg">
              <h4>Reliable and easy</h4>
              <p>Use a simple keyword search to discover the best suppliers and manufacturers on Alibaba.
              </p>
            </div>
            <div class="notes">
              <img src="../../../assets/images/bullets.svg">
              <h4>Reliable and easy</h4>
              <p>Make informed decisions quicker with critical product and supplier data available at your fingertips.
              </p>
            </div>
            <div class="notes">
              <img src="../../../assets/images/bullets.svg">
              <h4>Reliable and easy</h4>
              <p>Take advantage of unique search filters to refine your search results and find the perfect 
                match for your Amazon business.
              </p>
            </div>   
          </div>
        </div>
        <div class="search-containter" *ngIf="dataAvailable">
          <div class="search-box search-align">
            <input 
            [ngModel]="searchText" 
            class="search-box-input"
            type="text"
            placeholder="Enter product keyword">
            <p (click)="fetchdata()" class="search-text-btn">Search</p>
          </div>
          <div class="result-summary">
            <p class="result-text"><i>Showing Results for :</i>  <b>{{productSourceData.keyword | titlecase}}</b></p>
            <p class="result-number">Total Results: {{productSourceData.productList.length}}</p>
          </div>
          <div class="array-manipulation-container">
            <div class="custom-function-container">
              <mat-select placeholder="Supplier country" (selectionChange)=valueChange($event)>
                <mat-option *ngFor="let country of supplierCountries" [value]="country">
                  {{ country }}
                </mat-option>
              </mat-select>
                <mat-select placeholder="Product type" multiple>
                  <mat-option *ngFor="let product of productType" [value]="productType">{{product}}</mat-option>
                </mat-select>
            </div> 
            <div class="sort-container" >
              <img *ngIf="!showLowToHigh" 
              (click)="sort('showHighToLow')"
              src="./../../../assets/images/sort high to low.svg">
              <span *ngIf="!showLowToHigh"  class="tooltiptext">Sort price high to low</span>
              <img *ngIf="showLowToHigh"
              (click)="sort('showLowToHigh')"
               src="./../../../assets/images/sort low to high.svg">
               <span *ngIf="showLowToHigh" class="tooltiptext">Sort price low to high</span>
              <p
              (click)="clearAllFilters()"
              [ngClass]="{'active': setClearFilter,'in-active': !setClearFilter}"
              >Clear Filter</p>
            </div> 
          </div>
          <div class="product-data-containter" 
            *ngFor="let product of productSourceData.productList | slice:productDataStartPosition:productDataEndPosition; let i=index;">
            <div class="data-containter">
              <div class="img">
                <img [src]="product.productImg" alt="">
              </div>
              <div class="title-container">
                <p class="title" style="color:#2c8af8">{{product.productTitle}}</p>
                <p>Price: 
                  <span style="font-weight: bold;">
                    ${{product.priceFrom}} - ${{product.priceTo}}
                  </span>
                  &emsp;
                  MOQ: 
                  <span style="font-weight: bold;">
                    {{product.minOrderQuantity}}&nbsp;
                    {{product.minOrderUnit}}
                  </span>
                </p>
                <p class="ready-to-ship" *ngIf="product.isReadyToShip">Ready to ship</p>
              </div>
              <div class="vendor-details">
                <img src="../../../assets/images/alibaba_logo.svg">
                <span class="vendor"
                (click)="openAliSrc(product.productHref)">
                View on Alibaba</span>
                <span style="cursor: pointer;" (click)="toggleDropDown(i)">More details</span>  
                <mat-icon 
                  *ngIf="!enDropDown[i]"
                  style="cursor: pointer;" 
                  (click)="toggleDropDown(i)">
                  arrow_drop_down
                </mat-icon>    
                <mat-icon 
                  *ngIf="enDropDown[i]"
                  style="cursor: pointer;"
                  (click)="toggleDropDown(i)">
                arrow_drop_up
              </mat-icon>    
              </div>    
            </div>
            <div  *ngIf="!enDropDown[i]" class="supplier-container">
              <p>
                Suppler Details:
                &emsp;&emsp;
                {{product.supplierName}}
                &emsp;
                <span style="color:#7194f5">{{product.supplierYear}}YRS</span>
                &nbsp;
                <img class="trade-assuranse"
                  *ngIf="product.isAssessedSupplier" 
                  src="../../../assets/images/trade-assurance-alibaba.svg">
                  &nbsp;
                <img class="trade-assuranse"
                  *ngIf="product.isTradeAssuranceSupplier" 
                  src="../../../assets/images/verified.svg">
              </p>
            </div>
            <div class="zippy-container" *ngIf="enDropDown[i]">
              <div class="product-details">
                <h3 style="margin-left: 10px;">Product details</h3>
                <div class="border-line"></div>
                <ul style="margin-left: 10px;" class="ul-product-details">
                  <li *ngFor="let item of product.attributes"
                  class="li-product-details">
                    <span class="attr-name">{{item.attrName}}</span> : {{item.attrValue}}
                  </li>
                </ul>
              </div>
              <div class="supplier-details">
                <h3>Supplier details</h3>
                <div class="border-line"></div>
                <h4>{{product.supplierName}}</h4>
                <div class="verification">
                  <img class="trade-assuranse"
                  *ngIf="product.isAssessedSupplier" 
                  src="../../../assets/images/trade-assurance-alibaba.svg">
                  &nbsp;
                <img class="trade-assuranse"
                  *ngIf="product.isTradeAssuranceSupplier" 
                  src="../../../assets/images/verified.svg">
                </div>
                <ul class="ul-supplier-details">
                  <li *ngIf="product.supplierYear" class="li-supplier-details">
                    <span class="attr-name">Years on alibaba</span> 
                    : {{product.supplierYear}}
                  </li>
                  <li *ngIf="product.supplierCountry"
                    class="li-supplier-details">
                    <span class="attr-name">Country</span> 
                    : {{product.supplierCountry}}
                  </li>
                  <li *ngIf="product.reviewScore"
                    class="li-supplier-details">
                    <span class="attr-name">Review Score</span> 
                   : {{product.reviewScore}}
                  </li>
                  <li *ngIf="product.businessType"
                  class="li-supplier-details">
                    <span class="attr-name">Business Type </span>
                    :
                    {{product.businessType}}
                  </li>
                  <li *ngIf="product.halfYearOrderNumbe"
                  class="li-supplier-details">
                    <span class="attr-name">halfYearOrderNumber</span> 
                    :
                    {{product.halfYearOrderNumbe}}
                  </li>
                  <li *ngIf="product.halfYearSalesAmout" 
                  class="li-supplier-details">
                    <span class="attr-name">halfYearSalesAmout</span> 
                    :
                    {{product.halfYearSalesAmout}}
                  </li>
                  <li *ngIf="product.leadTime"
                  class="li-supplier-details">
                    <span class="attr-name">leadTime</span> 
                    :
                    {{product.leadTime}}
                  </li>
                  <li *ngIf="product.supplierTop3TradeRegion"
                  class="li-supplier-details">
                    <span class="attr-name">supplierTop3TradeRegion</span> 
                    :
                    {{product.supplierTop3TradeRegion}}
                  </li>
                  <li *ngIf="product.supplierMainProducts"
                  class="li-supplier-details">
                    <span class="attr-name">supplierMainProducts</span> 
                    :
                    {{product.supplierMainProducts}}
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <mat-paginator [length]="productSourceData.productList.length"
               [pageSize]="pageSize"
               [showFirstLastButtons]="true"
               (page)="pageEvent = pageChange($event)">
          </mat-paginator>
        </div>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>